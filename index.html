<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACABA</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="./assets/css/style.css">
</head>

<body class="bg-dark">
    <header>
        <nav class="navbar bg-dark">
            <div class="container-fluid justify-content-center" style="max-width: 100%;">
                <div class="row">
                    <div class="col-12">
                        <a class="navbar-brand py-3 d-block" href="#">
                            <img src="./assets/img/logo-acaba.webp" alt="Acaba" width="150" height="30.41">
                        </a>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    <main class="py-5">
        <div class="container-fluid">
            <div id="garbageContainer" class="row justify-content-center">
            </div>
        </div>
    </main>
    <footer class="pb-3">
        <div class="container-fluid">
            <div class="row justify-content-center">
                <div class="col-auto">
                    <figure class="w-auto mb-3 d-block mx-auto">
                        <img src="./assets/img/logo-telecom.png" width="100" alt="">
                    </figure>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-12">
                    <small class="small d-grid justify-content-center gap-2 text-center text-bg-dark">
                        <figure class="w-auto mb-0 mt-3 d-block mx-auto">
                            <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNTFweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgNTEgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjIgKDY3MTQ1KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5Hcm91cDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT0iLTAuMDAzMDQxODIxMzklIiB5MT0iNDkuOTY4NjQ4NiUiIHgyPSIxMDAuMTY0MDQzJSIgeTI9IjQ5Ljk2ODY0ODYlIiBpZD0ibGluZWFyR3JhZGllbnQtMSI+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM0QzEyMTEiIG9mZnNldD0iMCUiPjwvc3RvcD4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzhCMTgxQiIgb2Zmc2V0PSI0MC45NiUiPjwvc3RvcD4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzk2MUIxRCIgb2Zmc2V0PSI1My4zNiUiPjwvc3RvcD4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0I0MjMyMyIgb2Zmc2V0PSI3NS4zJSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjREQyRDJCIiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT0iNi4xNzk0NDI4NCUiIHkxPSIyOC4zNzU2NzU3JSIgeDI9Ijg3Ljc0NTYyOTIlIiB5Mj0iNzQuMjUwMjcwMyUiIGlkPSJsaW5lYXJHcmFkaWVudC0yIj4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0YwNUQ1RSIgb2Zmc2V0PSIwJSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRUY0MzQzIiBvZmZzZXQ9IjI3LjkyJSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRTMzRTNFIiBvZmZzZXQ9IjQxLjE2JSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjQzQzMTMyIiBvZmZzZXQ9IjY1LjAxJSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjOTExQjFEIiBvZmZzZXQ9Ijk2LjU1JSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjOEIxODFCIiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlN5bWJvbHMiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJtZW51LWZhc2UtVXBkYXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTIwLjAwMDAwMCwgLTIyLjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0ibG9nbyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIwLjAwMDAwMCwgMTkuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAyLjUwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05LjUwNDU0NTQ1LDAuNTc4OTQ3MzY4IEMxMC4yLDAuNTc4OTQ3MzY4IDEwLjc3OTU0NTUsMS4wNDIxMDUyNiAxMC44OTU0NTQ1LDEuNjIxMDUyNjMgQzEyLjE3MDQ1NDUsNi4wMjEwNTI2MyAxNS45OTU0NTQ1LDEwLjQyMTA1MjYgMjUuMTUyMjcyNywxMC40MjEwNTI2IEMzNC4zMDkwOTA5LDEwLjQyMTA1MjYgMzguMzY1OTA5MSw2LjM2ODQyMTA1IDM5LjY0MDkwOTEsMS42MjEwNTI2MyBDMzkuODcyNzI3MywwLjkyNjMxNTc4OSA0MC4zMzYzNjM2LDAuNTc4OTQ3MzY4IDQxLjAzMTgxODIsMC41Nzg5NDczNjggTDQ4LjU2NTkwOTEsMC41Nzg5NDczNjggQzQ5LjM3NzI3MjcsMC41Nzg5NDczNjggNTAuMDcyNzI3MywxLjI3MzY4NDIxIDUwLjA3MjcyNzMsMi4yIEM0OS4xNDU0NTQ1LDEzLjMxNTc4OTUgNDEuNjExMzYzNiwyMiAyNS4wMzYzNjM2LDIyIEM4LjkyNSwyMiAxLjYyMjcyNzI3LDEzLjU0NzM2ODQgMC42OTU0NTQ1NDUsMi4zMTU3ODk0NyBDMC41Nzk1NDU0NTUsMS4zODk0NzM2OCAxLjI3NSwwLjU3ODk0NzM2OCAyLjIwMjI3MjczLDAuNTc4OTQ3MzY4IEw5LjUwNDU0NTQ1LDAuNTc4OTQ3MzY4IFoiIGlkPSJQYXRoIiBmaWxsPSJ1cmwoI2xpbmVhckdyYWRpZW50LTEpIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEyLjQwMjI3MjcsNC45Nzg5NDczNyBDMTIuMDU0NTQ1NSw0LjE2ODQyMTA1IDExLjkzODYzNjQsMy45MzY4NDIxMSAxMS43MDY4MTgyLDMuNDczNjg0MjEgQzEwLjc3OTU0NTUsMS43MzY4NDIxMSA4LjkyNSwwLjU3ODk0NzM2OCA2Ljk1NDU0NTQ1LDAuNTc4OTQ3MzY4IEM2Ljk1NDU0NTQ1LDAuNTc4OTQ3MzY4IDYuOTU0NTQ1NDUsMC41Nzg5NDczNjggNi45NTQ1NDU0NSwwLjU3ODk0NzM2OCBDNC4xNzI3MjcyNywwLjU3ODk0NzM2OCAxLjk3MDQ1NDU1LDIuNjYzMTU3ODkgMS42MjI3MjcyNyw1LjIxMDUyNjMyIEMxLjYyMjcyNzI3LDUuMjEwNTI2MzIgMS42MjI3MjcyNyw1LjIxMDUyNjMyIDEuNjIyNzI3MjcsNS4yMTA1MjYzMiBDMS44NTQ1NDU0NSw2Ljk0NzM2ODQyIDIuMzE4MTgxODIsOC41Njg0MjEwNSAzLjAxMzYzNjM2LDEwLjA3MzY4NDIgQzQuMTcyNzI3MjcsMTIuNzM2ODQyMSA1LjkxMTM2MzY0LDE1LjA1MjYzMTYgOC4yMjk1NDU0NSwxNy4wMjEwNTI2IEM5Ljg1MjI3MjczLDE4LjQxMDUyNjMgMTEuOTM4NjM2NCwxOS40NTI2MzE2IDE0LjI1NjgxODIsMjAuMjYzMTU3OSBDMTcuMzg2MzYzNiwyMS4zMDUyNjMyIDIwLjk3OTU0NTUsMjIgMjUuMjY4MTgxOCwyMiBDMjYuNTQzMTgxOCwyMiAyNy44MTgxODE4LDIxLjg4NDIxMDUgMjguOTc3MjcyNywyMS43Njg0MjExIEMyOS41NTY4MTgyLDIxLjY1MjYzMTYgMzAuMTM2MzYzNiwyMS42NTI2MzE2IDMwLjcxNTkwOTEsMjEuNTM2ODQyMSBDMzAuNzE1OTA5MSwyMS41MzY4NDIxIDMwLjcxNTkwOTEsMjEuNTM2ODQyMSAzMC43MTU5MDkxLDIxLjUzNjg0MjEgQzMwLjgzMTgxODIsMjEuNTM2ODQyMSAzMC45NDc3MjczLDIxLjUzNjg0MjEgMzEuMDYzNjM2NCwyMS41MzY4NDIxIEMzMS40MTEzNjM2LDIxLjUzNjg0MjEgMzEuNzU5MDkwOSwyMS40MjEwNTI2IDMyLjIyMjcyNzMsMjEuMzA1MjYzMiBDMzIuNjg2MzYzNiwyMS4xODk0NzM3IDMzLjE1LDIxLjA3MzY4NDIgMzMuNjEzNjM2NCwyMC45NTc4OTQ3IEMzMy42MTM2MzY0LDIwLjk1Nzg5NDcgMzMuNjEzNjM2NCwyMC45NTc4OTQ3IDMzLjYxMzYzNjQsMjAuOTU3ODk0NyBDMTcuNTAyMjcyNywyMC4yNjMxNTc5IDEzLjQ0NTQ1NDUsNy4yOTQ3MzY4NCAxMi40MDIyNzI3LDQuOTc4OTQ3MzcgQzEyLjQwMjI3MjcsNC45Nzg5NDczNyAxMi40MDIyNzI3LDQuOTc4OTQ3MzcgMTIuNDAyMjcyNyw0Ljk3ODk0NzM3IFoiIGlkPSJQYXRoIiBmaWxsPSIjMDAwMDAwIiBvcGFjaXR5PSIwLjIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMzAuNDg0MDkwOSwyMS4wNzM2ODQyIEMxOC44OTMxODE4LDE5LjkxNTc4OTUgMTQuMzcyNzI3MywxMS44MTA1MjYzIDEyLjQwMjI3MjcsNi4xMzY4NDIxMSBDMTIuNDAyMjcyNyw2LjEzNjg0MjExIDEyLjQwMjI3MjcsNi4xMzY4NDIxMSAxMi40MDIyNzI3LDYuMDIxMDUyNjMgQzEyLjQwMjI3MjcsNS45MDUyNjMxNiAxMi4yODYzNjM2LDUuNzg5NDczNjggMTIuMjg2MzYzNiw1LjY3MzY4NDIxIEMxMi4wNTQ1NDU1LDUuMDk0NzM2ODQgMTEuNzA2ODE4Miw0LjA1MjYzMTU4IDExLjcwNjgxODIsMy43MDUyNjMxNiBDMTEuNDc1LDMuMDEwNTI2MzIgMTEuMjQzMTgxOCwyLjMxNTc4OTQ3IDExLjAxMTM2MzYsMS42MjEwNTI2MyBDMTAuODk1NDU0NSwxLjA0MjEwNTI2IDEwLjMxNTkwOTEsMC41Nzg5NDczNjggOS43MzYzNjM2NCwwLjU3ODk0NzM2OCBMNy40MTgxODE4MiwwLjU3ODk0NzM2OCBDNy4wNzA0NTQ1NSwwLjU3ODk0NzM2OCA2LjgzODYzNjM2LDAuNTc4OTQ3MzY4IDYuNDkwOTA5MDksMC41Nzg5NDczNjggTDIuMDg2MzYzNjQsMC41Nzg5NDczNjggQzEuMTU5MDkwOTEsMC41Nzg5NDczNjggMC41Nzk1NDU0NTUsMS4yNzM2ODQyMSAwLjU3OTU0NTQ1NSwyLjIgQzAuODExMzYzNjM2LDQuOTc4OTQ3MzcgMS4zOTA5MDkwOSw3LjY0MjEwNTI2IDIuNTUsMTAuMDczNjg0MiBDMy43MDkwOTA5MSwxMi43MzY4NDIxIDUuNDQ3NzI3MjcsMTUuMDUyNjMxNiA3Ljc2NTkwOTA5LDE3LjAyMTA1MjYgQzkuMzg4NjM2MzYsMTguNDEwNTI2MyAxMS40NzUsMTkuNDUyNjMxNiAxMy43OTMxODE4LDIwLjI2MzE1NzkgQzE2LjkyMjcyNzMsMjEuNDIxMDUyNiAyMC43NDc3MjczLDIyIDI1LjE1MjI3MjcsMjIgQzI3LjAwNjgxODIsMjIgMjguODYxMzYzNiwyMS44ODQyMTA1IDMwLjQ4NDA5MDksMjEuNjUyNjMxNiBDMzAuODMxODE4MiwyMS41MzY4NDIxIDMwLjgzMTgxODIsMjEuMTg5NDczNyAzMC40ODQwOTA5LDIxLjA3MzY4NDIgWiIgaWQ9IlBhdGgiIGZpbGw9InVybCgjbGluZWFyR3JhZGllbnQtMikiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"
                                alt="">
                        </figure>
                        Hecho en ðŸ‡©ðŸ‡´ por uGrow <br /> SoyRotulus
                    </small>
                </div>
            </div>
        </div>
    </footer>


    <!-- <div class="box-sensors d-none d-flex h-100 small sensors fw-bold justify-content-betwen align-items-center text-center">
        <div class="w-50 data-sensor-1">
            <div class="bar-sensor small d-grid" style="height: {height1}%;{heigthStyle1}">
                {Sensor1}
                <span class="material-symbols-outlined">sensors</span>
                <span class="small">1</span>
            </div>
        </div>
        <div class="w-50 data-sensor-2">
            <div class="bar-sensor small d-grid" style="height: {height2}%;{heigthStyle2}">
                {Sensor2}
                <span class="material-symbols-outlined">sensors</span>
                <span class="small">2</span>
            </div>
        </div>
    </div>  -->    
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
    integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"
    integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD"
    crossorigin="anonymous"></script>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCR5hQAYNMKouHLYyOygvEEY6dX9WUSxJg",
        authDomain: "acaba-infotep.firebaseapp.com",
        databaseURL: "https://acaba-infotep-default-rtdb.firebaseio.com",
        projectId: "acaba-infotep",
        storageBucket: "acaba-infotep.appspot.com",
        messagingSenderId: "1082030107993",
        appId: "1:1082030107993:web:88951c347cbd0c85c03048",
        measurementId: "G-4NWQT62586"
    };
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const starCountRef = ref(db, 'Sensores');
    const sensorPlaceHolder =
        `
            <div class="col-auto">
                <div class="item-trash small pt-3 p-2 mx-2 my-4">
                    <h2 class="data-title h5">{Nombre}</h2>     
                    <div class="w-100 d-flex mt-3 justify-content-betwen align-items-center">
                        <div class="data-pro-sensor text-secondary d-flex text-center align-items-center mx-auto ms-2">
                            <span class="material-symbols-outlined">sensors</span>
                            <span class="small">{Sensor3}%</span>
                        </div>
                        <div class="data-batery text-secondary d-flex text-center align-items-center mx-auto me-2">
                            <span class="material-symbols-outlined">battery_charging_full</span>
                            <span class="small">{Batteria}v</span>
                        </div> 
                    </div>
                    <div class="data-ip text-muted small shadow rounded w-100 text-center mt-3">{IPAdd}</div>
                    <div class="bar-sub-data {fillColor}" style="height:{Sensor3}%;"></div> <!--Usar p-yellow y p-red para cuando el contenedor llegue a este porcentajes-->
                </div>
            </div>
            `
    onValue(starCountRef, (snapshot) => {
        const data = snapshot.val();
        let sensorsHtml = '';
        for (let i in data) {
            const sensor = data[i];
            let sensorHtml = sensorPlaceHolder;
            for (let k in sensor) {
                sensorHtml = sensor[k] ? sensorHtml.replaceAll(`{${k}}`, sensor[k]) : '';
                if(k === 'Sensor3'){
                    const height = parseInt(sensor[k]); 
                    let fillColor = ''                   
                    if(height > 70 && height < 90){
                        fillColor = 'p-yellow'
                    } else if(height >= 90) {
                        fillColor = 'p-red'
                    }
                    sensorHtml = sensorHtml.replace('{fillColor}', fillColor);                    
                }
            }
            sensorsHtml += sensorHtml;
        }
        document.getElementById("garbageContainer").innerHTML = sensorsHtml;

    });

</script>

</html>